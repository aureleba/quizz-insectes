<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Abeilles ‚Äî S√©lection Multiple</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f7f7f7;
  }

  header {
    background: #ffcc33;
    padding: 20px;
    text-align: center;
    font-size: 1.4rem;
    font-weight: bold;
  }

  /* CONTENEUR IMAGE */
  #interactive-image {
    position: relative;
    padding: 15px;
  }

  #interactive-image img {
    width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    display: block;
    margin: auto;
  }

  /* ZONES CLIQUABLES VISIBLES */
  .click-zone {
    position: absolute;
    border: 2px solid #ff5555;
    border-radius: 12px;
    opacity: 0.25;
    cursor: pointer;
    transition: 0.25s;
    backdrop-filter: blur(2px);
  }

  .click-zone:hover {
    opacity: 0.45;
    background: rgba(255, 255, 0, 0.25);
  }

  .click-zone.selected {
    border-color: #007bff;
    background: rgba(0, 120, 255, 0.25);
    opacity: 0.6;
  }

  /* BOUTONS */
  #validate-btn, #reset-btn {
    display: block;
    margin: 20px auto;
    padding: 12px 26px;
    font-size: 1.1rem;
    border: none;
    border-radius: 8px;
    background: #ffcc33;
    cursor: pointer;
    transition: 0.2s;
  }

  #validate-btn:hover, #reset-btn:hover {
    background: #e6b800;
  }

  #reset-btn {
    display: none;
    background: #ccc;
  }

  /* POPUP MESSAGE CENTRAL */
  #final-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.7);
    background: white;
    padding: 25px 30px;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
    width: min(90%, 450px);
    opacity: 0;
    transition: 0.3s;
    text-align: center;
    z-index: 999;
    pointer-events: none;
  }

  #final-message.visible {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    pointer-events: auto;
  }

  #final-message h2 {
    margin-top: 0;
  }

  /* SURCHARGE FOND GRIS */
  #overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    opacity: 0;
    pointer-events: none;
    transition: 0.3s;
    z-index: 998;
  }

  #overlay.visible {
    opacity: 1;
    pointer-events: auto;
  }

</style>
</head>
<body>

<header>Trouvez les 2 mouches mim√©tiques innofensives parmi ces abeilles et gu√™pes</header>

<section id="interactive-image">
  <img src="insectes.jpg" id="main-image">

  <!-- Zones cliquables -->
  <div class="click-zone" data-id="1" style="top:250px; left:300px; width:175px; height:300px;"></div>
  <div class="click-zone" data-id="2" style="top:300px; left:560px; width:180px; height:410px;"></div>
  <div class="click-zone" data-id="3" style="top:200px; left:840px; width:180px; height:260px;"></div>
  <div class="click-zone" data-id="4" style="top:310px; left:1120px; width:180px; height:260px;"></div>
  <div class="click-zone" data-id="5" style="top:870px; left:300px; width:180px; height:230px;"></div>
  <div class="click-zone" data-id="6" style="top:730px; left:680px; width:180px; height:250px;"></div>
  <div class="click-zone" data-id="7" style="top:690px; left:920px; width:210px; height:300px;"></div>
  <div class="click-zone" data-id="8" style="top:1050px; left:640px; width:180px; height:250px;"></div>
  <div class="click-zone" data-id="9" style="top:950px; left:1130px; width:180px; height:300px;"></div>
  <div class="click-zone" data-id="10" style="top:1300px; left:410px; width:180px; height:200px;"></div>
  <div class="click-zone" data-id="11" style="top:1300px; left:880px; width:180px; height:220px;"></div>
</section>

<button id="validate-btn">Valider ma r√©ponse</button>
<button id="reset-btn">R√©essayer</button>

<!-- POPUP -->
<div id="overlay"></div>
<div id="final-message"></div>

<script>
  const correctZones = ["4", "5"];  // syrphes corrects
  const zones = document.querySelectorAll('.click-zone');
  const validateBtn = document.getElementById('validate-btn');
  const resetBtn = document.getElementById('reset-btn');
  const finalMsg = document.getElementById('final-message');
  const overlay = document.getElementById('overlay');

  let selected = [];

  zones.forEach(zone => {
    zone.addEventListener('click', () => {
      const id = zone.dataset.id;

      if (selected.includes(id)) {
        selected = selected.filter(x => x !== id);
        zone.classList.remove('selected');
      } else {
        selected.push(id);
        zone.classList.add('selected');
      }
    });
  });

  validateBtn.addEventListener('click', () => {

    if (selected.length !== 2) {
      showPopup("‚ö†Ô∏è S√©lectionnez exactement 2 zones.");
      return;
    }

    const isCorrect =
      selected.every(id => correctZones.includes(id)) &&
      correctZones.every(id => selected.includes(id));

    if (isCorrect) {
      showPopup("<h2>Bravo ! üéâ</h2><p>Vous avez trouv√© les 2 mouches (Syrphidae).<br> Elles se reconnaissent √† leurs <b>gros yeux</b> et leurs <b>courtes antennes</b>.</p>");
    } else {
      showPopup("<h2>‚ùå Incorrect</h2><p>Les mouches √©taient :<br><b>Volucella zonaria</b> (haut droite)<br><b>Chrysotoxum elegans</b> (milieu gauche)</p>");
    }

    // Affichage corrects
    zones.forEach(z => {
      if (correctZones.includes(z.dataset.id)) {
        z.style.borderColor = "lime";
        z.style.background = "rgba(0,255,0,0.25)";
        z.style.opacity = 0.6;
      }
    });

    validateBtn.style.display = "none";
    resetBtn.style.display = "block";
  });

  resetBtn.addEventListener('click', resetQuiz);

  function showPopup(content) {
    finalMsg.innerHTML = content;
    finalMsg.classList.add("visible");
    overlay.classList.add("visible");
  }

  function resetQuiz() {
    selected = [];
    zones.forEach(z => {
      z.classList.remove("selected");
      z.style.borderColor = "#ff5555";
      z.style.background = "transparent";
      z.style.opacity = "0.25";
    });

    validateBtn.style.display = "block";
    resetBtn.style.display = "none";

    finalMsg.classList.remove("visible");
    overlay.classList.remove("visible");
  }
</script>

</body>
</html>
